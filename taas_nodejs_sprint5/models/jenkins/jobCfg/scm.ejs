<% if (!vars.scm) { %>
    <scm />
<% } else if (vars.scm.git) { %>
    <scm class="hudson.plugins.git.GitSCM" plugin="git">
        <configVersion>2</configVersion>
        <userRemoteConfigs>
            <hudson.plugins.git.UserRemoteConfig>
                <url><%= vars.scm.git.url %></url>
                <% if (vars.scm.git.credentialsId) { %><credentialsId><%= vars.scm.git.credentialsId %></credentialsId><% } %>
            </hudson.plugins.git.UserRemoteConfig>
        </userRemoteConfigs>
        <branches>
            <hudson.plugins.git.BranchSpec>
                <name><%= vars.scm.git.branch %></name>
            </hudson.plugins.git.BranchSpec>
        </branches>
        <doGenerateSubmoduleConfigurations>false</doGenerateSubmoduleConfigurations>
        <submoduleCfg class="list"/>
        <extensions/>
    </scm>
<% } else if (vars.scm.svn) { %>
    <scm class="hudson.scm.SubversionSCM" plugin="subversion">
        <locations>
            <hudson.scm.SubversionSCM_-ModuleLocation>
                <remote><%= vars.scm.svn.url %></remote>
                <% if (vars.scm.svn.credentialsId) { %><credentialsId><%= vars.scm.svn.credentialsId %></credentialsId><% } %>
                <local>.</local>
                <depthOption>infinity</depthOption>
                <ignoreExternalsOption>false</ignoreExternalsOption>
            </hudson.scm.SubversionSCM_-ModuleLocation>
        </locations>
        <excludedRegions/>
        <includedRegions/>
        <excludedUsers/>
        <excludedRevprop/>
        <excludedCommitMessages/>
        <workspaceUpdater class="hudson.scm.subversion.UpdateUpdater"/>
        <ignoreDirPropChanges>false</ignoreDirPropChanges>
        <filterChangelog>false</filterChangelog>
    </scm>
<% } else if (vars.scm.cloneWorkspace) { %>
    <scm class="hudson.plugins.cloneworkspace.CloneWorkspaceSCM" plugin="clone-workspace-scm">
        <parentJobName><%= vars.scm.cloneWorkspace.parentJobName %></parentJobName>
        <criteria><%= vars.scm.cloneWorkspace.criteria? vars.scm.cloneWorkspace.criteria : 'Not Failed' %></criteria>
    </scm>
<% } %>
