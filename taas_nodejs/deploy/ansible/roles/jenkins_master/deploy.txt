# commands for manually setting up Docker engine and Jenkins master

sudo apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D

(16.04)
sudo -i <<EOT
echo "deb https://apt.dockerproject.org/repo ubuntu-xenial main" > /etc/apt/sources.list.d/docker.list
EOT

(14.04)
sudo -i <<EOT
echo "deb https://apt.dockerproject.org/repo ubuntu-trusty main" > /etc/apt/sources.list.d/docker.list
EOT

sudo apt-get update

(14.04 only)
sudo apt-get install -y linux-image-extra-$(uname -r)

(14.04 only)
sudo apt-get install -y apparmor

apt-cache policy docker-engine

sudo apt-get install -y docker-engine=1.8.3-0~trusty

sudo -i <<EOT
curl -L https://github.com/docker/compose/releases/download/1.5.2/docker-compose-`uname -s`-`uname -m` > /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
EOT

sudo service docker start


-----

scp
mkdir -p ~/docker/vol/jenkins
sudo chown -R 1000:1000 ~/docker/vol/jenkins
sudo docker-compose -f docker-compose.jenkins.yml build
sudo docker-compose -f docker-compose.jenkins.yml up -d
